<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>H5中使用video.js播放器播放m3u8文件</title>
    <script src="https://act.mcake.com/fangli/2018/wap/commonjs/jquery.min.js"></script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js" type="text/javascript"
            charset="utf-8"></script>
    <link href="https://cdn.bootcss.com/video.js/7.6.5/alt/video-js-cdn.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/video.js/6.6.2/video.js"></script>
    <script src="https://cdn.bootcss.com/videojs-contrib-hls/5.15.0/videojs-contrib-hls.min.js"></script>
</head>

<body>
<video id="myVideo" class="video-js vjs-default-skin vjs-big-play-centered" controls autoplay
       webkit-playsinline="true"
       playsinline="true" style="width: 100%; height: 240px;" type="video/m3u8" data-setup='{}'>
	<!-- src传入获取m3u8文件的地址，浏览器会自动下载并解析m3u8文件，然后根据m3u8文件的内容循环请求密钥和ts文件 -->
    <source id="source"
            src="http://localhost:8900/api/admin/download/m3u8?hlsToken=123::1712909259231"
            type="application/x-mpegURL">
</video>
<script>
    var myVideo = videojs('myVideo', {
        autoplay: true,
        preload: 'auto'
    });
    myVideo.play();
    document.addEventListener("WeixinJSBridgeReady", function () {
        myVideo.play()
    }, false);
</script>
</body>
</html>